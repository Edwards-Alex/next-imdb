## Next js Movie application



### 1. Create project 

- command create application 
- `npx create-next-app@latest`
- select the option you need



### 2. Start Home page 

- delete all at src/page.js replace it with react functional 



### 3. Add Header component and update the layout structure

- create folder components and file Header.jsx

- import Header.jsx in layout.js

- ```js
  import Header from "../components/Header.jsx";
  
  export default function RootLayout({ children }) {
    return (
      <html lang="en">
        <body
          className={`${geistSans.variable} ${geistMono.variable} antialiased`}
        >
          <Header />
          {children}
        </body>
      </html>
    );
  }
  ```

- write header navigation bar and application logo

- ```jsx
  export default function Header() {
    return (
      <div className='flex justify-between items-center p-3 max-w-6xl mx-auto'>
        <ul className='flex gap-4'>
          <li>
            <Link href={'/sign-in'}>Sign in</Link>
          </li>
          <li className='hidden sm:block'>
            <Link href={'/'}>Home</Link>
          </li>
          <li className='hidden sm:block'>
            <Link href={'/about'}>About</Link>
          </li>
        </ul>
        <Link href={'/'} className='flex gap-1 items-center'>
          <span className='text-2xl font-bold bg-amber-500 py-1 px-2 rounded-lg'>
            IMDB
          </span>
          <span className='text-xl hidden sm:inline'>Clone</span>
        </Link>
      </div>
    )
  }
  ```



### 4. Add dark mode functionality

- install next themes in order to easily add dark mode functionality

- https://www.npmjs.com/package/next-themes/v/0.0.6

- create components/ThemeCom.jsx  provider ThemeProvider and components/DarkModeSwitch.jsx

- ```jsx
  "use client"
  
  import { ThemeProvider } from 'next-themes'
  
  export default function Providers({ children }) {
      return (
          <ThemeProvider attribute='class' defaultTheme='system'>
              <div className="text-gray-700 dark:text-gray-200 dark:bg-gray-700 min-h-screen select-none
              transition-colors duration-300">
                  {children}
              </div>
          </ThemeProvider>)
  }
  ```

- ```jsx
  'use client'
  import { MdLightMode, MdDarkMode } from 'react-icons/md'
  import { useTheme } from "next-themes"
  import { useEffect, useState } from "react";
  
  export default function DarkModeSwitch() {
      const { theme, setTheme, systemTheme } = useTheme();
      const [mounted, setMounted] = useState(false);
      const currentTheme = theme === 'system' ? systemTheme : theme;
      useEffect(() => setMounted(true), []);
      return (
          <div>
              {mounted &&
                  (currentTheme === 'dark' ? (
                      <MdLightMode
                          onClick={() => setTheme('light')}
                          className='text-xl cursor-pointer hover:text-amber-500'
                      />
                  ) : (
                      <MdDarkMode
                          onClick={( ) => setTheme('dark')}
                          className='text-xl cursor-pointer hover:text-amber-500'
                      />
                  ))}
          </div>
      )
  }
  ```

- edit tailwind config add `darkMod:'class'` after`plugins:[],`

- add switch in Header 

- ```jsx
  import React from 'react'
  import Link from 'next/link'
  import DarkModeSwitch from './DarkModeSwitch.jsx'
  
  export default function Header() {
    return (
      <div className='flex justify-between items-center p-3 max-w-6xl mx-auto'>
        <ul className='flex gap-4'>
          <li>
            <Link href={'/sign-in'}>Sign in</Link>
          </li>
          <li className='hidden sm:block'>
            <Link href={'/'}>Home</Link>
          </li>
          <li className='hidden sm:block'>
            <Link href={'/about'}>About</Link>
          </li>
        </ul>
        <div className='flex items-center gap-4'>
          <DarkModeSwitch />
          <Link href={'/'} className='flex gap-1 items-center'>
            <span className='text-2xl font-bold bg-amber-500 py-1 px-2 rounded-lg'>
              IMDB
            </span>
            <span className='text-xl hidden sm:inline'>Clone</span>
          </Link>
        </div>
      </div>
    )
  }
  ```

- add `ThemeCOm` in layout.js and wrap the div

- ```js
  import { Geist, Geist_Mono } from "next/font/google";
  import "./globals.css";
  import Header from "@/components/Header";
  import ThemCom from "@/components/ThemeCom";
  
  const geistSans = Geist({
    variable: "--font-geist-sans",
    subsets: ["latin"],
  });
  
  const geistMono = Geist_Mono({
    variable: "--font-geist-mono",
    subsets: ["latin"],
  });
  
  export const metadata = {
    title: "Create Next App",
    description: "Generated by create next app",
  };
  
  export default function RootLayout({ children }) {
    return (
      <html lang="en" suppressHydrationWarning>
        <body>
          <ThemCom>
            <Header />
            {children}
          </ThemCom>
        </body>
      </html>
    );
  }
  ```



### 5. Integrate Clerk authentication with the app

- https://dashboard.clerk.com/  link for clerk authentication 
- install clerk package  `npm install @clerk/nextjs`
- follow the guide to set up sign-in and sign-up page for next-js 
- https://clerk.com/docs/references/nextjs/custom-sign-in-or-up-page?_gl=1

- use {SignedIn, SignedOut,UserButton} from '@clerk/next.js',let sign in icon change to user message

- ```jsx
  import React from 'react'
  import Link from 'next/link'
  import DarkModeSwitch from './DarkModeSwitch.jsx'
  import { SignedIn, SignedOut, SignInButton, UserButton } from '@clerk/nextjs'
  
  export default function Header() {
    return (
      <div className='flex justify-between items-center p-3 max-w-6xl mx-auto'>
        <ul className='flex gap-4'>
          <SignedIn>
            <UserButton />
          </SignedIn>
          <SignedOut>
            <Link href={'/sign-in'}>Sign in</Link>
          </SignedOut>
          <li className='hidden sm:block'>
            <Link href={'/'}>Home</Link>
          </li>
          <li className='hidden sm:block'>
            <Link href={'/about'}>About</Link>
          </li>
        </ul>
        <div className='flex items-center gap-4'>
          <DarkModeSwitch />
          <Link href={'/'} className='flex gap-1 items-center'>
            <span className='text-2xl font-bold bg-amber-500 py-1 px-2 rounded-lg'>
              IMDB
            </span>
            <span className='text-xl hidden sm:inline'>Clone</span>
          </Link>
        </div>
      </div>
    )
  }
  ```



### 6. Sync Clerk data to your app with webhooks

- use it's hook to send in the information to our server
- in order to use hooks we need to deploy our application to vercel first 
- then copy the url with deploy vercel and paste at create webhook in clerk dashboard







